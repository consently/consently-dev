<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cookie Policy - {{company_name}}</title>

  <!-- Basic styling â€” adapt to your site's CSS framework -->
  <style>
    body { font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; line-height:1.62; color:#111; padding:24px; max-width:980px; margin:0 auto; }
    h1,h2,h3 { color:#0b2545; }
    .meta { color:#4b5563; font-size:0.95rem; margin-bottom:18px; }
    .section { margin:28px 0; }
    table { width:100%; border-collapse:collapse; margin-top:12px; }
    th, td { padding:10px 12px; border:1px solid #e6e9ee; text-align:left; font-size:0.95rem; }
    th { background:#f7f9fc; }
    .note { font-size:0.92rem; color:#374151; background:#f8fafc; padding:10px; border-left:3px solid #c7e0ff; margin-top:12px; }
    .edit-hint { background: #fff7cc; padding: 2px 6px; border-radius:4px; border:1px dashed #ffd27a; }
    .small { font-size:0.9rem; color:#6b7280; }
    .actions { margin-top:18px; display:flex; gap:8px; flex-wrap:wrap; }
    .btn { padding:8px 12px; border-radius:6px; border:1px solid #cbd5e1; background:#fff; cursor:pointer; }
    .btn-primary { background:#0b69ff; color:white; border:none; }
    pre{ background:#f3f4f6; padding:12px; border-radius:6px; overflow:auto; }
  </style>
</head>
<body>

  <!-- ===========================
       Cookie Policy Template
       Integration notes below (search for INJECT or {{placeholder}})
       =========================== -->

  <header>
    <h1>Cookie Policy</h1>
    <div class="meta">
      Last updated: <span class="edit-hint" id="last_updated">{{last_updated_date}}</span>
      &nbsp;|&nbsp; Version: <span class="edit-hint" id="policy_version">{{policy_version}}</span>
    </div>
  </header>

  <section class="section">
    <h2>1. Introduction</h2>
    <p>
      This Cookie Policy explains how <strong class="edit-hint">{{company_name}}</strong> ("we", "us", "our") uses cookies and similar technologies on <strong class="edit-hint">{{website_url}}</strong> (the "Website").
      For details about how we process personal data generally, see our Privacy Policy: <a href="{{privacy_policy_url}}" id="privacy_link">{{privacy_policy_url}}</a>.
    </p>
  </section>

  <section class="section">
    <h2>2. What are cookies?</h2>
    <p class="small">
      Cookies are small text files stored on your device when you visit websites. They help websites operate, remember your settings, and enable analytics and advertising functions.
      "First-party" cookies are set by our domain; "third-party" cookies are set by external partners.
    </p>
  </section>

  <section class="section">
    <h2>3. Why we use cookies</h2>
    <ul>
      <li><strong>Strictly necessary:</strong> Required for core website functionality (e.g., security, session, shopping cart).</li>
      <li><strong>Functional:</strong> Remember choices (language, region) and personalization.</li>
      <li><strong>Analytics:</strong> Understand website usage to improve performance.</li>
      <li><strong>Advertising / Marketing:</strong> Deliver relevant ads and measure campaign effectiveness.</li>
      <li><strong>Unclassified:</strong> Cookies we are still classifying.</li>
    </ul>
  </section>

  <section class="section">
    <h2>4. Cookies used on this website</h2>
    <p class="note">The table below is auto-filled from the site scan. Please review provider names, purposes, and categories before publishing.</p>

    <!-- ===========================
         INTEGRATION POINT:
         Replace the following placeholder with an HTML table generated by your scanner.
         The table should include columns:
         Cookie Name | Domain | First/Third-Party | Category | Expiry | Provider | Purpose | Data Shared With
         Example placeholder below for structure. Your script should replace the entire <div id="cookie_inventory"> content.
         =========================== -->
    <div id="cookie_inventory">
      <!-- INJECT_COOKIE_TABLE -->
      <table aria-describedby="cookie-inventory">
        <thead>
          <tr>
            <th>Cookie Name</th>
            <th>Domain</th>
            <th>1P / 3P</th>
            <th>Category</th>
            <th>Expiry</th>
            <th>Provider</th>
            <th>Purpose</th>
            <th>Data Shared With</th>
          </tr>
        </thead>
        <tbody>
          <!-- Example row: your scanner should generate similar rows -->
          <tr>
            <td><code>_shopify_essential</code></td>
            <td>www.consentmanager.com</td>
            <td>1P</td>
            <td>Functional</td>
            <td>1 year</td>
            <td>ConsentManager</td>
            <td>Enhances website functionality</td>
            <td>ConsentManager</td>
          </tr>
          <tr>
            <td><code>_shopify_y</code></td>
            <td>.consentmanager.com</td>
            <td>1P</td>
            <td>Necessary</td>
            <td>2 years</td>
            <td>Shopify</td>
            <td>Persist cart for returning visitors</td>
            <td>Shopify</td>
          </tr>
          <!-- End example rows -->
        </tbody>
      </table>
    </div>

    <p class="small" style="margin-top:10px;">
      <strong>Developer note:</strong> When generating the table, also include a machine-readable JSON download option (e.g., "Download cookie inventory") for audit/export.
    </p>
  </section>

  <section class="section">
    <h2>5. Legal basis for processing (where applicable)</h2>
    <p class="small">
      For users in the EU/UK, we rely on a mix of legal bases:
      <ul>
        <li><strong>Necessary cookies:</strong> legitimate interest to operate the Website.</li>
        <li><strong>Analytics / Functional / Marketing:</strong> user consent where required under law.</li>
      </ul>
      Users may withdraw consent at any time via the Cookie Settings or by contacting <a href="mailto:{{contact_email}}">{{contact_email}}</a>.
    </p>
  </section>

  <section class="section">
    <h2>6. How to manage cookies</h2>
    <p>
      You can manage cookie preferences through:
    </p>
    <ol>
      <li><strong>Cookie banner / settings:</strong> Click <span class="edit-hint">Cookie Settings</span> on the Website to accept/reject categories.</li>
      <li><strong>Browser controls:</strong> Block or delete cookies using your browser settings (links below).</li>
    </ol>

    <div class="small">
      <strong>Browser guides:</strong>
      <ul>
        <li><a href="https://support.google.com/chrome/answer/95647">Chrome</a></li>
        <li><a href="https://support.mozilla.org/en-US/kb/enable-and-disable-cookies-website-preferences">Firefox</a></li>
        <li><a href="https://support.apple.com/guide/safari/manage-cookies-and-website-data-sfri11471/mac">Safari</a></li>
        <li><a href="https://support.microsoft.com/help/4027947/microsoft-edge-delete-cookies">Edge</a></li>
      </ul>
    </div>
  </section>

  <section class="section">
    <h2>7. Third-party cookies</h2>
    <p class="small">
      Some cookies are set by third parties (analytics providers, ad networks, social platforms). These parties have their own privacy and cookie policies. We recommend checking their policies to understand how they use cookie data.
    </p>
  </section>

  <section class="section">
    <h2>8. Data retention &amp; deletion</h2>
    <p class="small">
      Cookie lifetimes vary: session cookies expire when you close your browser; persistent cookies expire after a set period. We review cookie retention periodically and will remove or re-classify cookies as needed.
    </p>
  </section>

  <section class="section">
    <h2>9. Your rights</h2>
    <p class="small">
      Depending on your jurisdiction, you may have rights to access, rectify, delete, restrict or object to processing of your personal data, and the right to data portability. To exercise these rights, contact us at:
      <br /><strong>Email:</strong> <a href="mailto:{{contact_email}}">{{contact_email}}</a>
    </p>
  </section>

  <section class="section">
    <h2>10. Changes to this policy</h2>
    <p class="small">
      We may update this Cookie Policy. The "Last updated" date at the top will reflect the latest revision and {{policy_version}} will increment.
    </p>
  </section>

  <section class="section">
    <h2>11. Contact</h2>
    <p>
      <strong class="edit-hint">{{company_name}}</strong><br/>
      Address: <span class="edit-hint" id="company_address">{{company_address}}</span><br/>
      Email: <a href="mailto:{{contact_email}}">{{contact_email}}</a><br/>
      Website: <a href="{{website_url}}">{{website_url}}</a>
    </p>
  </section>

  <div class="actions">
    <!-- These buttons are optional and helpful for UX -->
    <button class="btn" id="download_html">Download HTML</button>
    <button class="btn" id="download_json">Download cookie inventory (JSON)</button>
    <button class="btn btn-primary" id="publish_policy">Publish to site</button>
  </div>

  <footer style="margin-top:28px;" class="small">
    <p>Policy generated by <strong>{{scanner_name}}</strong>. This document is a template and should be reviewed by legal counsel where required.</p>
  </footer>

  <!-- ===========================
       OPTIONAL: Small inline JS helpers
       Your developer can replace this with framework code (React / Vue / server side rendering).
       =========================== -->
  <script>
    /* Developer integration tips:
       - Replace {{...}} tokens server-side, or set them using JS before display:
         document.getElementById('last_updated').textContent = generatedDate;
       - Replace the #cookie_inventory innerHTML with your generated cookie table (full HTML).
       - For audits, provide a "download JSON" endpoint that outputs the raw scanner results.
    */

    // Example: download displayed HTML as file
    document.getElementById('download_html').addEventListener('click', function () {
      const html = '<!doctype html>\\n' + document.documentElement.outerHTML;
      const blob = new Blob([html], { type: 'text/html' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = '{{company_name}}-cookie-policy.html';
      a.click();
      URL.revokeObjectURL(url);
    });

    // Example: ask backend for inventory JSON (replace endpoint as needed)
    document.getElementById('download_json').addEventListener('click', function () {
      // If your scanner stores the JSON in window.cookieInventory, you can download it directly:
      if (window.cookieInventory) {
        const blob = new Blob([JSON.stringify(window.cookieInventory, null, 2)], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url; a.download = '{{company_name}}-cookie-inventory.json';
        a.click();
        URL.revokeObjectURL(url);
        return;
      }
      // Otherwise call backend endpoint:
      fetch('/api/cookie-inventory/download')
        .then(r => r.blob())
        .then(blob => {
          const url = URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = url; a.download = '{{company_name}}-cookie-inventory.json';
          a.click();
          URL.revokeObjectURL(url);
        })
        .catch(() => alert('Inventory download not available.'));
    });

    // Publish button - example hook to call your publish endpoint
    document.getElementById('publish_policy').addEventListener('click', function () {
      // Post policy HTML to your server for publishing. Replace endpoint and payload format as required.
      fetch('/api/publish-cookie-policy', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ html: document.getElementById('cookie_inventory').innerHTML, meta: { last_updated: '{{last_updated_date}}', version: '{{policy_version}}' } })
      }).then(r => {
        if (r.ok) alert('Policy published.');
        else alert('Publish failed.');
      }).catch(e => alert('Publish error: ' + e.message));
    });
  </script>

  <!-- ===========================
       END TEMPLATE
       =========================== -->
</body>
</html>