# Supabase Configuration
NEXT_PUBLIC_SUPABASE_URL=your-supabase-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# Widget URL Configuration
# For production: https://www.consently.in
# For development: http://localhost:3000
NEXT_PUBLIC_WIDGET_URL=https://www.consently.in

# Google Translate API
GOOGLE_TRANSLATE_API_KEY=your-google-translate-api-key

# Bhashini API (Optional - for Indian languages)
BHASHINI_USER_ID=your-bhashini-user-id
BHASHINI_API_KEY=your-bhashini-api-key

# Email Configuration
RESEND_API_KEY=your-resend-api-key

# Payment Configuration (Razorpay)
RAZORPAY_KEY_ID=your-razorpay-key-id
RAZORPAY_KEY_SECRET=your-razorpay-key-secret

# Browserless (for cookie scanning)
BROWSERLESS_API_KEY=your-browserless-api-key
BROWSERLESS_URL=https://chrome.browserless.io

# Gemini AI API (for policy generation)
NEXT_PUBLIC_GEMINI_API_KEY=your-gemini-api-key

# Application URL
NEXT_PUBLIC_APP_URL=https://www.consently.in
NEXT_PUBLIC_SITE_URL=https://www.consently.in

# =============================================================================
# API Setu / DigiLocker Age Verification (DPDPA 2023 Compliance)
# =============================================================================
# Get credentials from: https://partners.apisetu.gov.in
# API Documentation: https://directory.apisetu.gov.in/api-collection/digilocker
#
# IMPORTANT: DigiLocker OAuth endpoints are at /public/oauth2/1/ path
# - Authorize: https://api.digitallocker.gov.in/public/oauth2/1/authorize
# - Token:     https://api.digitallocker.gov.in/public/oauth2/1/token
# - User:      https://api.digitallocker.gov.in/public/oauth2/1/user

# Your API Setu Client/Issuer ID (shown at bottom of partners.apisetu.gov.in dashboard)
# Example: in.consently
APISETU_CLIENT_ID=your-apisetu-client-id

# Your API Setu Client Secret (from partners.apisetu.gov.in)
APISETU_CLIENT_SECRET=your-apisetu-client-secret

# OAuth callback URL (must EXACTLY match what's registered in API Setu dashboard)
# Format: https://yourdomain.com/api/auth/meripehchaan/callback
APISETU_REDIRECT_URI=https://www.consently.in/api/auth/meripehchaan/callback

# DigiLocker OAuth Base URL (for authorize/token endpoints)
# CRITICAL: Use meripehchaan.gov.in domain, NOT api.digitallocker.gov.in
# Production: https://digilocker.meripehchaan.gov.in/public/oauth2/1
DIGILOCKER_OAUTH_BASE_URL=https://digilocker.meripehchaan.gov.in/public/oauth2/1

# API Base URL (for AVS and data endpoints - typically same as OAuth)
APISETU_BASE_URL=https://digilocker.meripehchaan.gov.in/public/oauth2/1

# Sandbox URLs (for testing - optional)
# DIGILOCKER_SANDBOX_OAUTH_URL=https://api.sandbox.digitallocker.gov.in/public/oauth2/1
# APISETU_SANDBOX_URL=https://api.sandbox.digitallocker.gov.in/public/oauth2/1

# Set to 'true' for development/testing (uses mock responses, bypasses real DigiLocker)
APISETU_USE_MOCK=false

# Set to 'true' to use API Setu sandbox environment
APISETU_USE_SANDBOX=false

# =============================================================================
# NSSO/MeriPehchaan OAuth Parameters
# =============================================================================
# These MUST match your APISetu AuthPartner configuration.
# Verify at: consume.apisetu.gov.in → Consume APIs → MeriPehchaan Auth → AuthPartner
# The dashboard shows the exact values and generates a reference authorize URL.

# OAuth scope - MUST match the "Scope" checkboxes in APISetu AuthPartner dashboard
# "Age verification" checkbox → scope=avs
# "Guardian consent" checkbox → also enable in dashboard for guardian flows
DIGILOCKER_AGE_VERIFICATION_SCOPE=avs

# ACR (Authentication Context Class Reference) - matches checked ACR boxes in dashboard
# Dashboard checkboxes: Aadhaar Verified + Email + Mobile → aadhaar+email+mobile
DIGILOCKER_ACR=aadhaar+email+mobile

# AMR (Authentication Methods Reference) - matches checked AMR box in dashboard
# Dashboard checkbox: Aadhaar → aadhaar
DIGILOCKER_AMR=aadhaar

# PLA (Profile Level Assurance) - Y enables PAN/KYC profile upgrades
# Users may see "Age Verification needs more details" screens - this is EXPECTED
DIGILOCKER_PLA=Y

# DL Flow - Sign-in (matches "Flow" radio button in dashboard)
DIGILOCKER_DL_FLOW=signin

# JWT Secret for signing age verification assertions (generate a secure 32+ byte secret)
# Generate with: openssl rand -base64 32
AGE_VERIFICATION_JWT_SECRET=your-secure-jwt-secret-min-32-bytes

# =============================================================================
# MeriPehchaan Consent Service (Consent Postback)
# =============================================================================
# Separate from the AuthPartner OAuth config above. This handles consent
# artefact postbacks from MeriPehchaan's consent service.
# Configure at: consume.apisetu.gov.in → Consent Partner settings

# Consent Client ID (from API Setu consent partner dashboard)
MERIPEHCHAAN_CONSENT_CLIENT_ID=UK0F7C1979

# Post Back Key (shared secret for validating incoming postback requests)
# From API Setu consent partner dashboard → "Post Back Key"
MERIPEHCHAAN_CONSENT_POSTBACK_KEY=your-postback-key

# Call Back Key (shared secret for outgoing consent API calls)
# From API Setu consent partner dashboard → "Call Back Key"
MERIPEHCHAAN_CONSENT_CALLBACK_KEY=your-callback-key

# Static JWKS for verifying consent postback JWT signatures (RS256)
# From API Setu consent partner dashboard → "Static JWKS"
# Paste the FULL JSON including the outer {"keys":[...]} wrapper
# IMPORTANT: Must be valid JSON on a single line (escape newlines if needed)
MERIPEHCHAAN_CONSENT_STATIC_JWKS={"keys":[{"kty":"RSA","kid":"consentlykey1","use":"sig","alg":"RS256","n":"PASTE_FULL_N_VALUE_HERE","e":"AQAB"}]}

# Consent API Base URL (for querying/updating consent records via API Setu)
MERIPEHCHAAN_CONSENT_API_BASE_URL=https://digilocker.meripehchaan.gov.in/public/oauth2/1
